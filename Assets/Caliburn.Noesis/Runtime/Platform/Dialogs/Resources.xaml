<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:cal="clr-namespace:Caliburn.Noesis"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!--  DataTemplate.QueryDialog.Implicit  -->
    <DataTemplate DataType="{x:Type cal:QueryDialog}">
        <DataTemplate.Resources>
            <cal:EnumFlagSetToVisibilityConverter x:Key="Caliburn.Converter.EnumFlagSetToVisible" />
            <cal:IsEqualConverter x:Key="Caliburn.Converter.IsEqualTo" />
        </DataTemplate.Resources>
        <DockPanel>
            <TextBlock
                DockPanel.Dock="Top"
                FontSize="18"
                FontWeight="DemiBold"
                HorizontalAlignment="Left"
                Text="{Binding Title, Mode=OneWay}"
                TextAlignment="Center" />
            <StackPanel
                DockPanel.Dock="Bottom"
                HorizontalAlignment="Right"
                Orientation="Horizontal"
                VerticalAlignment="Bottom">
                <Button
                    Content="OK"
                    Height="40"
                    IsDefault="{Binding DefaultResult, Mode=OneWay, Converter={StaticResource Caliburn.Converter.IsEqualTo}, ConverterParameter={x:Static cal:DialogResult.Ok}}"
                    Visibility="{Binding DialogResults, Mode=OneWay, Converter={StaticResource Caliburn.Converter.EnumFlagSetToVisible}, ConverterParameter={x:Static cal:DialogResults.Ok}}"
                    Width="100"
                    cal:CloseDialog.Result="Ok" />
                <Button
                    Content="Yes"
                    Height="40"
                    IsDefault="{Binding DefaultResult, Mode=OneWay, Converter={StaticResource Caliburn.Converter.IsEqualTo}, ConverterParameter={x:Static cal:DialogResult.Yes}}"
                    Visibility="{Binding DialogResults, Mode=OneWay, Converter={StaticResource Caliburn.Converter.EnumFlagSetToVisible}, ConverterParameter={x:Static cal:DialogResults.Yes}}"
                    Width="100"
                    cal:CloseDialog.Result="Yes" />
                <Button
                    Content="No"
                    Height="40"
                    IsDefault="{Binding DefaultResult, Mode=OneWay, Converter={StaticResource Caliburn.Converter.IsEqualTo}, ConverterParameter={x:Static cal:DialogResult.No}}"
                    Visibility="{Binding DialogResults, Mode=OneWay, Converter={StaticResource Caliburn.Converter.EnumFlagSetToVisible}, ConverterParameter={x:Static cal:DialogResults.No}}"
                    Width="100"
                    cal:CloseDialog.Result="No" />
                <Button
                    Content="Cancel"
                    Height="40"
                    IsDefault="{Binding DefaultResult, Mode=OneWay, Converter={StaticResource Caliburn.Converter.IsEqualTo}, ConverterParameter={x:Static cal:DialogResult.Cancel}}"
                    Visibility="{Binding DialogResults, Mode=OneWay, Converter={StaticResource Caliburn.Converter.EnumFlagSetToVisible}, ConverterParameter={x:Static cal:DialogResults.Cancel}}"
                    Width="100"
                    cal:CloseDialog.Result="Cancel" />
            </StackPanel>
            <TextBlock
                HorizontalAlignment="Left"
                Margin="0,20"
                Text="{Binding Content, Mode=OneWay}"
                TextAlignment="Center"
                VerticalAlignment="Center" />
        </DockPanel>
    </DataTemplate>

    <!--  ControlTemplate.DialogItem  -->
    <ControlTemplate TargetType="{x:Type cal:DialogItem}" x:Key="Caliburn.ControlTemplate.DialogItem">
        <Border
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}"
            CornerRadius="{TemplateBinding Border.CornerRadius}"
            Padding="{TemplateBinding Padding}"
            RenderTransformOrigin=".5,.5"
            x:Name="Border">
            <ContentPresenter
                Content="{TemplateBinding ContentControl.Content}"
                ContentStringFormat="{TemplateBinding ContentControl.ContentStringFormat}"
                ContentTemplate="{TemplateBinding ContentControl.ContentTemplate}"
                ContentTemplateSelector="{TemplateBinding ContentControl.ContentTemplateSelector}"
                x:Name="ContentPresenter" />
            <Border.RenderTransform>
                <TransformGroup>
                    <MatrixTransform x:Name="PART_MatrixTransform" />
                    <RotateTransform Angle="0" x:Name="PART_RotateTransform" />
                    <ScaleTransform ScaleX="1" ScaleY="1" x:Name="PART_ScaleTransform" />
                    <SkewTransform AngleX="0" AngleY="0" x:Name="PART_SkewTransform" />
                    <TranslateTransform X="0" Y="0" x:Name="PART_TranslateTransform" />
                </TransformGroup>
            </Border.RenderTransform>
        </Border>
    </ControlTemplate>

    <!--  ControlTemplate.DialogHost  -->
    <ControlTemplate TargetType="{x:Type cal:DialogHost}" x:Key="Caliburn.ControlTemplate.DialogHost">
        <Grid
            Background="{TemplateBinding OverlayBackgroundBrush}"
            Visibility="Collapsed"
            x:Name="PART_RootGrid">
            <cal:DialogItem
                Content="{TemplateBinding Content}"
                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                Style="{TemplateBinding DialogContainerStyle}"
                VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
        </Grid>
    </ControlTemplate>

    <!--  Style.DialogItem  -->
    <Style TargetType="{x:Type cal:DialogItem}" x:Key="Caliburn.Style.DialogItem">
        <Setter Property="KeyboardNavigation.IsTabStop" Value="False" />
        <Setter Property="KeyboardNavigation.ControlTabNavigation" Value="Cycle" />
        <Setter Property="KeyboardNavigation.TabNavigation" Value="Cycle" />
        <Setter Property="MinWidth" Value="480" />
        <Setter Property="MinHeight" Value="320" />
        <Setter Property="Padding" Value="20" />
        <Setter Property="Border.CornerRadius" Value="8" />
        <Setter Property="Background" Value="#FF888888" />
        <Setter Property="Template" Value="{StaticResource Caliburn.ControlTemplate.DialogItem}" />
    </Style>

    <!--  Style.DialogHost  -->
    <Style TargetType="{x:Type cal:DialogHost}" x:Key="Caliburn.Style.DialogHost">
        <Setter Property="OverlayBackgroundBrush" Value="#44000000" />
        <Setter Property="DialogContainerStyle" Value="{StaticResource Caliburn.Style.DialogItem}" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template" Value="{StaticResource Caliburn.ControlTemplate.DialogHost}" />
    </Style>

    <!--  Style.DialogItem.Implicit  -->
    <Style BasedOn="{StaticResource Caliburn.Style.DialogItem}" TargetType="{x:Type cal:DialogItem}" />

    <!--  Style.DialogHost.Implicit  -->
    <Style BasedOn="{StaticResource Caliburn.Style.DialogHost}" TargetType="{x:Type cal:DialogHost}" />

</ResourceDictionary>
